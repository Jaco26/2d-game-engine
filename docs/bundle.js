!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r,i,o,s,u=function(){function t(){this.listeners={},this.queue=[]}return t.prototype.on=function(t,e){this.listeners[t]&&this.off(t),this.listeners[t]=e},t.prototype.off=function(t){delete this.listeners[t]},t.prototype.emit=function(t,e){this.queue.unshift({event:t,payload:e})},t.prototype.flushQueue=function(t){for(;this.queue.length;){var e=this.queue.pop(),n=e.type,r=e.payload;"function"==typeof this.listeners[n]?this.listeners[n](t,r):console.warn("No listener registed for event: "+n)}},t}(),a=function(){function t(t){this.handle=null,this.callback=t}return t.prototype.play=function(){this.callback()?this.handle=requestAnimationFrame(this.play.bind(this)):this.pause()},t.prototype.pause=function(){cancelAnimationFrame(this.handle)},t.prototype.frame=function(){this.callback()},t}(),c=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},l=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},f=function(){function t(){this.images={}}return t.prototype.computeFilenameFromPath=function(t){return t.slice(t.lastIndexOf("/")+1,t.lastIndexOf("."))},t.prototype.createImg=function(t){return new Promise((function(e,n){var r=new Image;r.src=t,r.onload=function(){e(r)}}))},t.prototype.load=function(t,e){return c(this,void 0,void 0,(function(){var n,r;return l(this,(function(i){switch(i.label){case 0:return n=e||this.computeFilenameFromPath(t),[4,this.createImg(t)];case 1:return r=i.sent(),this.images[n]=r,[2]}}))}))},t.prototype.loadBatch=function(t){var e=this;return Promise.all(t.map((function(t){var n=t[0],r=t[1];return e.load(n,r)})))},t.prototype.get=function(t){return this.images[t]},t}(),h=function(){function t(t){this.ctx=t}return t.prototype.fillStyle=function(t){return this.ctx.fillStyle=t,this},t.prototype.strokeStyle=function(t){return this.ctx.strokeStyle=t,this},t.prototype.fill=function(t){return t&&(this.ctx.fillStyle=t),this.ctx.fill(),this},t.prototype.stroke=function(t){return t&&(this.ctx.strokeStyle=t),this.ctx.stroke(),this},t.prototype.rect=function(t,e,n,r){return this.ctx.beginPath(),this.ctx.rect(t,e,n,r),this.ctx.closePath(),this},t.prototype.arc=function(t,e,n){return this.ctx.beginPath(),this.ctx.arc(t,e,n,0,2*Math.PI),this.ctx.closePath(),this},t.prototype.fillText=function(t,e,n,r,i){return this.ctx.beginPath(),this.ctx.font=r,this.ctx.fillText(n,t,e,i),this.ctx.closePath(),this},t.prototype.drawImage=function(t,e,n){return this.ctx.beginPath(),this.ctx.drawImage(t,e,n),this.ctx.closePath(),this},t.prototype.clearRect=function(t,e,n,r){return this.ctx.clearRect(t,e,n,r),this},t}(),p=function(){function t(){this.pressedKeys=[]}return t.prototype.listen=function(){var t=this;window.addEventListener("keydown",(function(e){return t.pushKeys(e)})),window.addEventListener("keyup",(function(e){return t.spliceKeys(e)}))},t.prototype.stopListening=function(){var t=this;window.removeEventListener("keydown",(function(e){return t.pushKeys(e)})),window.removeEventListener("keyup",(function(e){return t.spliceKeys(e)}))},t.prototype.pushKeys=function(t){this.pressedKeys.includes(t.key)||this.pressedKeys.push(t.key)},t.prototype.spliceKeys=function(t){this.pressedKeys.includes(t.key)&&this.pressedKeys.splice(this.pressedKeys.indexOf(t.key),1)},t}(),y=function(){function t(){this.rules=[]}return t.prototype.addRule=function(t,e){this.rules.push({predicate:t,command:e})},t.prototype.parseInput=function(t){return this.rules.reduce((function(e,n){var r=n.predicate,i=n.command;return r(t)&&e.push(i),e}),[])},t}(),d=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},v=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},w=function(){function t(t){var e=this,n=t.canvasId,r=t.width,i=t.height,o=t.scene,s=t.viewport;this.state={ready:!1,gameOn:!1},this.events=new u,this.loader=new f,this.keyboard=new p,this.canvas=document.getElementById(n),this.canvasCtx=this.canvas.getContext("2d"),this.width=r,this.height=i,this.canvas.width=s.width,this.canvas.height=s.height,this.scene=o,this.viewport=s,this.animation=new a((function(){return e.scene.update(e.ctx),e.events.flushQueue(e.ctx),e.state.gameOn})),this.brush=new h(this.canvasCtx),this.init()}return t.prototype._update=function(){return this.scene.update(this.ctx),this.events.flushQueue(this.ctx),this.state.gameOn},t.prototype.init=function(){return d(this,void 0,void 0,(function(){return v(this,(function(t){switch(t.label){case 0:return[4,this.scene.preload(this.ctx)];case 1:return t.sent(),this.scene.create(this.ctx),this.keyboard.listen(),this.state.ready=!0,[2]}}))}))},Object.defineProperty(t.prototype,"ctx",{get:function(){return{events:this.events,animation:this.animation,brush:this.brush,camera:1,physics:1,loader:this.loader,viewport:this.viewport,pressedKeys:this.keyboard.pressedKeys}},enumerable:!1,configurable:!0}),t.prototype.frame=function(){this.animation.frame()},t.prototype.play=function(t){var e=this;if(void 0===t&&(t=0),t>1e3)throw new Error("Too many startup attempts");this.state.gameOn=!0,this.state.ready?this.animation.play():(t+=1,setTimeout((function(){e.play(t)})))},t.prototype.pause=function(){this.state.gameOn=!1,this.animation.pause()},t.prototype.reset=function(){this.pause(),this.scene.create(this.ctx)},t.prototype.on=function(t,e){this.events.on(t,e)},t.prototype.off=function(t){this.events.off(t)},t}(),b=function(){function t(t,e){this.inputMap={},this.dx=0,this.dy=0,this.fx=0,this.fy=0,this.x=t,this.y=e}return t.prototype.ifInput=function(t){var e=this;return{then:function(n){e.inputMap[t]=function(){return n(e)}}}},t.prototype.handleInput=function(t){for(var e=0;e<t.length;e++){var n=t[e];this.inputMap[n]&&this.inputMap[n]()}},t}(),x=new y;x.addRule((r="ArrowUp",i="ArrowDown",function(t){return t.includes(r)&&t.indexOf(r)>t.indexOf(i)}),(function(t){t.y-=2})),x.addRule(function(t,e){return function(n){return n.includes(e)&&n.indexOf(e)>n.indexOf(t)}}("ArrowUp","ArrowDown"),(function(t){t.y+=2})),x.addRule((o="ArrowLeft",s="ArrowRight",function(t){return t.includes(o)&&t.indexOf(o)>t.indexOf(s)}),(function(t){t.x-=2})),x.addRule(function(t,e){return function(n){return n.includes(e)&&n.indexOf(e)>n.indexOf(t)}}("ArrowLeft","ArrowRight"),(function(t){t.x+=2}));var m=x,g=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))},k=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},O=new b(200,200);new w({canvasId:"game-canvas",width:2700,height:1800,viewport:{x:0,y:0,width:900,height:600},scene:{preload:function(t){var e=t.loader;return g(this,void 0,void 0,(function(){return k(this,(function(t){switch(t.label){case 0:return[4,e.load("images/wifi.jpg")];case 1:return t.sent(),[2]}}))}))},create:function(t){},update:function(t){var e=t.brush,n=t.loader,r=t.viewport,i=t.pressedKeys;m.parseInput(i).forEach((function(t){return t(O)})),e.clearRect(r.x,r.y,r.width,r.height),e.drawImage(n.get("wifi"),O.x,O.y)}}}).play()}]);